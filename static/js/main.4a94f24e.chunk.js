(this["webpackJsonptex-color-pdf-parser"]=this["webpackJsonptex-color-pdf-parser"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(5),c=n.n(s),o=(n(16),n(1)),i=n.n(o),l=n(9),u=n(3),p=n(6),d=n(7),m=n(2),h=n(10),f=n(8),v=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).parseProducts=function(e){e.items.forEach((function(t,n){if("\u041f\u041e\u0414"===t.str||"\u0411\u0422\u041f"===t.str){var a=e.items[n-3].str;e.items[n-3].str.length<3&&(a=e.items[n-4].str),r.products.push({id:a,amount:e.items[n+2].str})}}))},r.findDate=function(e){var t=e.findIndex((function(e){return"\u041d\u043e\u043c\u0435\u0440 "===e}));return"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"===e[t+1]?e[t+2]:e.length>0&&-1!==t?r.findDate(e.slice(t+1)):void 0},r.parsePdf=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files,(a=new FileReader).readAsDataURL(n[0]),a.onload=function(e){r.props.pdfjsLib.getDocument(e.target.result).promise.then((function(e){Object(u.a)(i.a.mark((function t(){var n,a,s,c,o,u,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r.products=[],a=1;case 3:if(!(a<=e._pdfInfo.numPages)){t.next=16;break}return s=function(e){var t,n,a=[""],r=Object(l.a)(e.items);try{for(r.s();!(n=r.n()).done;){var s=n.value;t!==s.transform[5]&&t?a.push(s.str):a[a.length-1]+=s.str,t=s.transform[5]}}catch(c){r.e(c)}finally{r.f()}return a},t.next=7,e.getPage(a);case 7:return c=t.sent,t.next=10,c.getTextContent();case 10:o=t.sent,r.parseProducts(o),n=n.concat(s(o));case 13:a++,t.next=3;break;case 16:u=n[n.findIndex((function(e){return"\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u041e\u041a\u0414\u041f"===e}))+1],r.supplierList.some((function(e){return!!u.includes(e.search)&&(e.hasOwnProperty("name")?(u=e.name,!0):e.children.some((function(e){return!!u.includes(e.search)&&(u=e.name,!0)})))})),p=n[n.findIndex((function(e){return"\u0422\u041e\u0412\u0410\u0420\u041d\u0410\u042f \u041d\u0410\u041a\u041b\u0410\u0414\u041d\u0410\u042f"===e}))+1],d=r.findDate(n),r.setState({supplier:u,products:r.products,sheetNumber:p,sheetDate:d,showProducts:!0,copyJSON:!0});case 21:case"end":return t.stop()}}),t)})))(Object(m.a)(r))}),(function(e){console.error(e)}))};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.copyCodeToClipboard=function(){r.textArea.current.select(),document.execCommand("copy")},r.state={showProducts:!1,supplier:null,products:[],sheetNumber:null,copyJSON:!1},r.textArea=Object(a.createRef)(),r.products=[],r.supplierList=[{search:"\u0411\u0430\u0443\u0446\u0435\u043d\u0442\u0440",children:[{search:"10 \u043b\u0435\u0442 \u041e\u043a\u0442\u044f\u0431\u0440\u044f",name:"\u0411\u0430\u0443 10 \u043b\u0435\u0442"},{search:"\u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434\u0441\u043a\u0430\u044f",name:"\u0411\u0430\u0443 \u0412\u043e\u043b"}]},{search:"\u041b\u0435\u0440\u0443\u0430",children:[{search:"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u0432",name:"\u041b\u0435\u0440\u0443\u0430 \u0410\u0440\u0445"},{search:"\u0410\u043c\u0443\u0440\u0441\u043a\u0430\u044f",name:"\u041b\u0435\u0440\u0443\u0430 \u0410\u043c\u0443\u0440"}]},{search:"\u041e\u0411\u0418",name:"\u041e\u0431\u0438"}],r}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.state.copyJSON&&this.copyCodeToClipboard()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},this.state.copyJSON&&r.a.createElement("div",{className:"popup"},r.a.createElement("p",null,"JSON \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d!"),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.setState({copyJSON:!1})}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))),r.a.createElement("div",{className:"appSlitBlock"},r.a.createElement("div",{className:"chooseFile"},r.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430:"),r.a.createElement("input",{type:"file",id:"input",onChange:function(t){return e.parsePdf(t)},multiple:!0}))),r.a.createElement("div",{className:"appSlitBlock"},r.a.createElement("div",{className:"parseResult"},r.a.createElement("p",null,"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a:"),r.a.createElement("p",null,r.a.createElement("code",null,this.state.supplier||"...")),r.a.createElement("p",null,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430:"),r.a.createElement("p",null,r.a.createElement("code",null,this.state.sheetNumber||"...")),r.a.createElement("p",null,"\u0414\u0430\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430:"),r.a.createElement("p",null,r.a.createElement("code",null,this.state.sheetDate||"...")),r.a.createElement("p",null,"\u0422\u043e\u0432\u0430\u0440\u044b:"),r.a.createElement("textarea",{ref:this.textArea,style:{width:"100%"},rows:"10",value:this.state.showProducts?JSON.stringify({supplier:this.state.supplier,sheetDate:this.state.sheetDate,sheetNumber:this.state.sheetNumber,products:this.state.products}):"",readOnly:!0}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=window["pdfjs-dist/build/pdf"];b.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.5.207/pdf.worker.min.js",c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,{pdfjsLib:b})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.4a94f24e.chunk.js.map